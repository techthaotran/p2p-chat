{"version":3,"file":"use-dialog.js","sources":["../src/use-dialog.js"],"sourcesContent":["import React, {useRef, useEffect} from 'react';\n\nexport function useDialog({\n  state: [open, setOpen],\n  modal = true,\n  onCancel = null,\n  onClose = null\n}) {\n  const ref = useRef(null);\n\n  /**\n   * Sync the native <dialog> element with the open / closed state.\n   */\n  useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n\n    const dialog = ref.current;\n    if (open && !dialog.open) {\n      if (modal) {\n        dialog.showModal();\n      } else {\n        dialog.show();\n      }\n    }\n\n    if (!open && dialog.open) {\n      dialog.close();\n    }\n  }, [open, ref]);\n\n  /**\n   * Native <dialog> may be closed when the user hits ESC, or submits a\n   * form with method=\"dialog\". Update the state to be closed when this\n   * happens.\n   */\n  useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n\n    const dialog = ref.current;\n\n    const handleClose = (evt) => {\n      setOpen(false);\n      if (onClose) {\n        onClose(evt);\n      }\n    };\n\n    const handleCancel = (evt) => {\n      if (onCancel) {\n        onCancel(evt);\n      }\n    };\n\n    dialog.addEventListener('cancel', handleCancel);\n    dialog.addEventListener('close', handleClose);\n    return () => {\n      dialog.removeEventListener('cancel', handleCancel);\n      dialog.removeEventListener('close', handleClose);\n    };\n  }, [ref, onCancel, onClose, setOpen]);\n\n  return {\n    dialogProps: {ref}\n  };\n}\n\nexport const Dialog = ({state, modal, onClose, onCancel, ...otherProps}) => {\n  const {dialogProps} = useDialog({\n    state,\n    modal,\n    onClose,\n    onCancel\n  });\n\n  return <dialog {...dialogProps} {...otherProps} />;\n};\n"],"names":["useDialog","state","open","setOpen","modal","onCancel","onClose","ref","useRef","useEffect","current","dialog","showModal","show","close","handleClose","evt","handleCancel","addEventListener","removeEventListener","dialogProps","otherProps","React"],"mappings":"wSAEgBA,aACdC,MAAQC,OAAMC,WACdC,MAAAA,oBACAC,SAAAA,aAAW,WACXC,QAAAA,aAAU,OAEJC,EAAMC,SAAO,MAyDnB,OApDAC,YAAU,WACR,GAAKF,EAAIG,QAAT,CAIA,IAAMC,EAASJ,EAAIG,QACfR,IAASS,EAAOT,OACdE,EACFO,EAAOC,YAEPD,EAAOE,SAINX,GAAQS,EAAOT,MAClBS,EAAOG,UAER,CAACZ,EAAMK,IAOVE,YAAU,WACR,GAAKF,EAAIG,QAAT,CAIA,IAAMC,EAASJ,EAAIG,QAEbK,EAAc,SAACC,GACnBb,GAAQ,GACJG,GACFA,EAAQU,IAINC,EAAe,SAACD,GAChBX,GACFA,EAASW,IAMb,OAFAL,EAAOO,iBAAiB,SAAUD,GAClCN,EAAOO,iBAAiB,QAASH,cAE/BJ,EAAOQ,oBAAoB,SAAUF,GACrCN,EAAOQ,oBAAoB,QAASJ,MAErC,CAACR,EAAKF,EAAUC,EAASH,IAErB,CACLiB,YAAa,CAACb,IAAAA,mBAII,gBAAEN,IAAAA,MAAOG,IAAAA,MAAOE,IAAAA,QAASD,IAAAA,SAAagB,iLACpCrB,EAAU,CAC9BC,MAAAA,EACAG,MAAAA,EACAE,QAAAA,EACAD,SAAAA,IAGF,OAAOiB,gCAPAF,YAO6BC"}